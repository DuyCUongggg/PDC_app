<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>AI Sales Assistant</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css?v=0.0.2.5" />
    <style>
        /* Force logo image visible and hide legacy emoji icon */
        .logo-container .logo { display: none !important; }
        .logo-container .logo-img { width: 28px; height: 28px; display: inline-block; object-fit: contain; margin-right: 10px; }
    </style>
    <!-- Favicon -->
    <link rel="icon" href="img/paw-solid-full.svg" type="image/svg+xml" />
    <link rel="shortcut icon" href="img/paw-solid-full.svg" type="image/svg+xml" />
</head>
<body>
    <!-- App Shell -->
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo-container">
                    <img src="img/paw-solid-full.svg" alt="Logo" class="logo-img" width="28" height="28" />
                    <div class="brand-info">
                        <h1>AI Sales</h1>
                        <span class="brand-subtitle">Assistant</span>
                    </div>
                </div>
                
            </div>

            <nav class="sidebar-nav">
                <div class="nav-section">
                    <h3 class="nav-section-title">Qu·∫£n l√Ω</h3>
                    <button class="nav-item active" onclick="switchTab('admin'); handleNavClick()" data-tab="admin">
                        <span class="nav-icon">üì¶</span>
                        <span class="nav-label">S·∫£n ph·∫©m</span>
                        <span class="nav-badge" id="productCountBadge">0</span>
                    </button>
                </div>
                
                <div class="nav-section">
                    <h3 class="nav-section-title">T·∫°o n·ªôi dung</h3>
                    <button class="nav-item" onclick="switchTab('templates'); handleNavClick()" data-tab="templates">
                        <span class="nav-icon">üìù</span>
                        <span class="nav-label">Templates</span>
                    </button>
                    <button class="nav-item" onclick="switchTab('refund'); handleNavClick()" data-tab="refund">
                        <span class="nav-icon">üí∞</span>
                        <span class="nav-label">Ho√†n ti·ªÅn</span>
                    </button>
                    <button class="nav-item" onclick="switchTab('upgrade'); handleNavClick()" data-tab="upgrade">
                        <span class="nav-icon">üîÑ</span>
                        <span class="nav-label">ƒê·ªïi g√≥i</span>
                    </button>
                </div>
                
                
                <div class="nav-section">
                    <h3 class="nav-section-title">Qu·∫£n l√Ω</h3>
                    <button class="nav-item" onclick="switchTab('schedule'); handleNavClick()" data-tab="schedule">
                        <span class="nav-icon">üìÖ</span>
                        <span class="nav-label">L·ªãch l√†m vi·ªác</span>
                    </button>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">üë§</div>
                    <div class="user-details">
                        <span class="user-name">Admin</span>
                        <span class="user-role">Qu·∫£n l√Ω</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Header -->
            <header class="main-header">
                <div class="header-left">
                    <button class="mobile-menu-toggle" id="mobileMenuBtn" title="M·ªü menu" aria-label="M·ªü menu">‚ò∞</button>
                    <h2 class="page-title" id="pageTitle">Qu·∫£n l√Ω s·∫£n ph·∫©m</h2>
                    <p class="page-subtitle" id="pageSubtitle">Th√™m, ch·ªânh s·ª≠a v√† qu·∫£n l√Ω c√°c g√≥i s·∫£n ph·∫©m</p>
                </div>
                
                <div class="header-controls">
                    <div class="header-stats">
                        <div class="header-stat">
                            <span class="header-stat-value" id="productCountHeader">0</span>
                            <span>S·∫£n ph·∫©m</span>
                        </div>
                        <div class="header-stat">
                            <span class="header-stat-value" id="lastUpdated">--:--</span>
                            <span>C·∫≠p nh·∫≠t</span>
                        </div>
                    </div>
                    
                    <div class="header-actions">
                        <div class="action-group">
                            <button class="btn btn-outline" id="themeToggleBtn" title="ƒê·ªïi giao di·ªán">
                                <span class="btn-icon">üåì</span>
                                Theme
                            </button>
                            <div class="dropdown">
                                <button class="btn btn-primary" id="fileMenuBtn">
                                    <span class="btn-icon">üìÅ</span>
                                    File
                                    <span class="dropdown-arrow">‚ñº</span>
                                </button>
                                <div class="dropdown-menu" id="fileMenu">
                                    <button class="dropdown-item" onclick="loadFromGoogleSheets()">
                                        <span class="item-icon">üìä</span>
                                        T·∫£i t·ª´ Google Sheets
                                    </button>
                                    <button class="dropdown-item" onclick="saveToGoogleSheets()">
                                        <span class="item-icon">üíæ</span>
                                        L∆∞u v√†o Google Sheets
                                    </button>
                                    <div class="dropdown-divider"></div>
                                    <button class="dropdown-item" onclick="exportData()">
                                        <span class="item-icon">üì§</span>
                                        Xu·∫•t d·ªØ li·ªáu
                                    </button>
                                    <button class="dropdown-item" onclick="importData()">
                                        <span class="item-icon">üì•</span>
                                        Nh·∫≠p d·ªØ li·ªáu
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Content Area -->
            <div class="content-area">
                <!-- ADMIN SECTION -->
                <section id="admin" class="tab-content active">
                    <!-- Add Product Card -->
                    <div class="card add-product-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <span class="title-icon">‚ûï</span>
                                Th√™m s·∫£n ph·∫©m m·ªõi
                            </h3>
                            <p class="card-subtitle">T·∫°o g√≥i s·∫£n ph·∫©m m·ªõi cho h·ªá th·ªëng</p>
                        </div>
                        
                        <div class="card-content">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label class="form-label">T√™n s·∫£n ph·∫©m</label>
                                    <input id="productName" class="form-input" placeholder="Nh·∫≠p t√™n s·∫£n ph·∫©m..." />
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Th·ªùi h·∫°n</label>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <input id="productDuration" class="form-input" type="number" placeholder="0" min="1" step="1" />
                                        </div>
                                        <div class="form-group">
                                            <select id="durationUnit" class="form-select">
                                                <option value="ng√†y">ng√†y</option>
                                                <option value="th√°ng">th√°ng</option>
                                            </select>
                                        </div>
                                    </div>
            </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Gi√° (VNƒê)</label>
                                    <input id="productPrice" class="form-input" placeholder="0" inputmode="numeric" autocomplete="off" />
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Danh m·ª•c</label>
                                    <select id="productCategory" class="form-select">
                                <option value="AI Services">AI Services</option>
                                <option value="C√¥ng c·ª•">C√¥ng c·ª•</option>
                            </select>
                        </div>
                    </div>

                            <div class="form-actions">
                                <button class="btn btn-primary btn-lg" onclick="addProduct()">
                                    <span class="btn-icon">‚ûï</span>
                                    Th√™m s·∫£n ph·∫©m
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Search and Filter -->
                    <div class="card card-compact">
                        <div class="card-content">
                            <div class="form-row">
                                <div class="form-group flex-1">
                                    <div class="search-input-group">
                                        <span class="search-icon">üîç</span>
                                        <input id="adminSearch" class="form-input" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m..." oninput="filterProducts()" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <select id="categoryFilter" class="form-select" onchange="filterProducts()">
                                        <option value="">T·∫•t c·∫£ danh m·ª•c</option>
                            <option value="AI Services">AI Services</option>
                            <option value="C√¥ng c·ª•">C√¥ng c·ª•</option>
                        </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Products List -->
                    <div class="card products-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <span class="title-icon">üì¶</span>
                                Danh s√°ch s·∫£n ph·∫©m
                            </h3>
                            <div class="card-actions">
                                <span class="products-count" id="productsCount">0 s·∫£n ph·∫©m</span>
                            </div>
                    </div>

                        <div class="card-content">
                            <div id="productList" class="products-list"></div>
                        </div>
                </div>
            </section>

                <!-- TEMPLATES SECTION -->
            <section id="templates" class="tab-content">
                    <div class="card template-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <span class="title-icon">üìù</span>
                                T·∫°o Template
                            </h3>
                            <p class="card-subtitle">T·∫°o n·ªôi dung template cho kh√°ch h√†ng</p>
                    </div>

                        <div class="card-content">
                            <div id="templateEmptyState" class="empty-state">
                                <div class="empty-icon">üìù</div>
                                <h4>Ch∆∞a c√≥ s·∫£n ph·∫©m</h4>
                                <p>Vui l√≤ng th√™m s·∫£n ph·∫©m tr∆∞·ªõc khi t·∫°o template</p>
                            </div>

                            <div class="template-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Ch·ªçn s·∫£n ph·∫©m</label>
                        <div class="search-container">
                                            <input id="templateProductSearch" class="form-input" type="text" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m..." />
                            <div id="templateSearchResults" class="search-results"></div>
                                        </div>
                        </div>

                                    <div class="form-group">
                                        <label class="form-label">T√™n kh√°ch h√†ng (t√πy ch·ªçn)</label>
                                        <input id="customerName" class="form-input" type="text" placeholder="VD: Anh Hi·∫øu" />
                                    </div>
                        </div>

                                <div class="form-actions">
                                    <button id="generateBtn" class="btn btn-primary btn-large" disabled onclick="generateTemplate()">
                                        <span class="btn-icon">‚ú®</span>
                                        T·∫°o Template
                                    </button>
                        </div>
                    </div>

                            <div id="templateResult" class="template-result" style="display:none;">
                                <div class="result-header">
                                    <h4>K·∫øt qu·∫£ Template</h4>
                                    <button class="btn btn-outline" onclick="copyTemplate()">
                                        <span class="btn-icon">üìã</span>
                                        Copy
                                    </button>
                                </div>
                                <div class="result-content">
                                    <pre id="templateContent" class="template-code"></pre>
                                </div>
                            </div>
                    </div>
                </div>
            </section>

                <!-- REFUND SECTION -->
            <section id="refund" class="tab-content">
                    <div class="card refund-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <span class="title-icon">üí∞</span>
                                T√≠nh ho√†n ti·ªÅn
                            </h3>
                            <div class="card-actions">
                                <button id="refundRefreshBtn" type="button" class="btn btn-outline" onclick="refreshRefundData()">
                                    <span class="btn-icon">üîÑ</span>
                                    L√†m m·ªõi
                                </button>
                            </div>
                            <p class="card-subtitle">T√≠nh to√°n s·ªë ti·ªÅn ho√†n l·∫°i cho kh√°ch h√†ng</p>
                    </div>

                        <div class="card-content">
                            <div id="refundEmptyState" class="empty-state">
                                <div class="empty-icon">üí∞</div>
                                <h4>Ch∆∞a c√≥ s·∫£n ph·∫©m</h4>
                                <p>Vui l√≤ng th√™m s·∫£n ph·∫©m tr∆∞·ªõc khi t√≠nh ho√†n ti·ªÅn</p>
                            </div>

                            <div class="refund-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Ch·ªçn s·∫£n ph·∫©m</label>
                        <div class="search-container">
                                            <input id="refundProductSearch" class="form-input" type="text" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m..." />
                            <div id="refundSearchResults" class="search-results"></div>
                                        </div>
                        </div>

                                    <div class="form-group">
                                        <label class="form-label">Kho·∫£ng th·ªùi gian</label>
                            <div class="date-range">
                                            <div class="date-input-group">
                                                <input type="date" id="startDate" class="form-input" />
                                                <button type="button" class="btn-today" onclick="setToday('startDate')" title="Ng√†y hi·ªán t·∫°i">üìÖ</button>
                                            </div>
                                            <span class="date-separator">ƒë·∫øn</span>
                                            <div class="date-input-group">
                                                <input type="date" id="endDate" class="form-input" />
                                                <button type="button" class="btn-today" onclick="setToday('endDate')" title="Ng√†y hi·ªán t·∫°i">üìÖ</button>
                                            </div>
                                        </div>
                                        <small class="form-hint">Ch·ªçn ng√†y b·∫Øt ƒë·∫ßu s·ª≠ d·ª•ng v√† ng√†y y√™u c·∫ßu ho√†n</small>
                            </div>
                        </div>

                                <div id="refundSelectedProduct" class="selected-product" style="display:none;">
                                    <div class="selected-header">
                                        <h4>S·∫£n ph·∫©m ƒë√£ ch·ªçn</h4>
                                    </div>
                                    <div class="selected-details">
                                        <div class="detail-item">
                                            <span class="detail-label">T√™n:</span>
                                            <span id="refundProductName" class="detail-value"></span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Gi√°:</span>
                                            <span id="refundProductPrice" class="detail-value"></span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Th·ªùi h·∫°n:</span>
                                            <span id="refundProductDuration" class="detail-value"></span>
                                        </div>
                                    </div>
                        </div>

                                <div class="form-actions">
                                    <button id="refundBtn" class="btn btn-primary btn-large" disabled onclick="calculateRefund()">
                                        <span class="btn-icon">üßÆ</span>
                                        T√≠nh ho√†n ti·ªÅn
                                    </button>
                        </div>
                    </div>

                            <div id="refundResult" class="refund-result" style="display:none;">
                                <div class="result-header">
                                    <h4>K·∫øt qu·∫£ t√≠nh to√°n</h4>
                                </div>
                                
                                <div class="result-sections">
                                    <div class="result-section">
                                        <h5>Chi ti·∫øt t√≠nh to√°n</h5>
                                        <div id="refundBreakdown" class="breakdown"></div>
                                    </div>
                                    
                                    <div class="result-section">
                                        <h5>N·ªôi dung g·ª≠i kh√°ch</h5>
                                        <div class="result-content">
                                            <pre id="refundCustomerContent" class="refund-code"></pre>
                                            <div class="share-block">
                                                <button class="btn btn-primary" onclick="copyRefundResult()">
                                                    <span class="btn-icon">üìã</span>
                                                    Copy n·ªôi dung g·ª≠i kh√°ch
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- UPGRADE SECTION -->
                <section id="upgrade" class="tab-content">
                    <div class="card upgrade-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <span class="title-icon">üîÑ</span>
                                ƒê·ªïi g√≥i s·∫£n ph·∫©m
                            </h3>
                            <div class="card-actions">
                                <button id="upgradeRefreshBtn" type="button" class="btn btn-outline btn-sm" onclick="refreshUpgradeData()">
                                    <span class="btn-icon">üîÑ</span>
                                    L√†m m·ªõi
                                </button>
                            </div>
                            <p class="card-subtitle">T√≠nh to√°n s·ªë ti·ªÅn b√π khi kh√°ch h√†ng ƒë·ªïi sang g√≥i kh√°c</p>
                        </div>
                        
                        <div class="card-content">
                            <div id="upgradeEmptyState" class="empty-state">
                                <div class="empty-icon">üîÑ</div>
                                <h4>Ch∆∞a c√≥ s·∫£n ph·∫©m</h4>
                                <p>Vui l√≤ng th√™m s·∫£n ph·∫©m tr∆∞·ªõc khi t√≠nh ƒë·ªïi g√≥i</p>
                            </div>

                            <div class="upgrade-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">G√≥i hi·ªán t·∫°i</label>
                                        <div class="search-container">
                                            <input id="currentProductSearch" class="form-input" type="text" placeholder="T√¨m ki·∫øm g√≥i hi·ªán t·∫°i..." />
                                            <div id="currentProductSearchResults" class="search-results"></div>
                                        </div>
                                        <label class="form-label" style="margin-top:12px;">B·∫Øt ƒë·∫ßu g√≥i hi·ªán t·∫°i</label>
                                        <div class="date-input-group">
                                            <input type="date" id="upgradeStartDate" class="form-input" />
                                            <button type="button" class="btn-today" onclick="setToday('upgradeStartDate')" title="Ng√†y hi·ªán t·∫°i">üìÖ</button>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">G√≥i mu·ªën ƒë·ªïi</label>
                                        <div class="search-container">
                                            <input id="newProductSearch" class="form-input" type="text" placeholder="T√¨m ki·∫øm g√≥i m·ªõi..." />
                                            <div id="newProductSearchResults" class="search-results"></div>
                                        </div>
                                        <label class="form-label" style="margin-top:12px;">Ng√†y ƒë·ªïi sang g√≥i m·ªõi</label>
                                        <div class="date-input-group">
                                            <input type="date" id="upgradeEndDate" class="form-input" />
                                            <button type="button" class="btn-today" onclick="setToday('upgradeEndDate')" title="Ng√†y hi·ªán t·∫°i">üìÖ</button>
                                        </div>
                                    </div>
                                </div>

                                <div id="upgradeSelectedProducts" class="selected-products" style="display:none;">
                                    <div class="products-comparison">
                                        <div class="product-card current-product">
                                            <div class="product-card-header">
                                                <h4>G√≥i hi·ªán t·∫°i</h4>
                                            </div>
                                            <div class="product-details">
                                                <div class="detail-item">
                                                    <span class="detail-label">T√™n:</span>
                                                    <span id="currentProductName" class="detail-value"></span>
                                                </div>
                                                <div class="detail-item">
                                                    <span class="detail-label">Gi√°:</span>
                                                    <span id="currentProductPrice" class="detail-value"></span>
                                                </div>
                                                <div class="detail-item">
                                                    <span class="detail-label">Th·ªùi h·∫°n:</span>
                                                    <span id="currentProductDuration" class="detail-value"></span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="upgrade-arrow">‚Üí</div>
                                        
                                        <div class="product-card new-product">
                                            <div class="product-card-header">
                                                <h4>G√≥i m·ªõi</h4>
                                            </div>
                                            <div class="product-details">
                                                <div class="detail-item">
                                                    <span class="detail-label">T√™n:</span>
                                                    <span id="newProductName" class="detail-value"></span>
                                                </div>
                                                <div class="detail-item">
                                                    <span class="detail-label">Gi√°:</span>
                                                    <span id="newProductPrice" class="detail-value"></span>
                                                </div>
                                                <div class="detail-item">
                                                    <span class="detail-label">Th·ªùi h·∫°n:</span>
                                                    <span id="newProductDuration" class="detail-value"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-actions" style="justify-content:center;">
                                    <button id="upgradeBtn" class="btn btn-primary btn-large" disabled onclick="calculateUpgrade()">
                                        <span class="btn-icon">üßÆ</span>
                                        T√≠nh ƒë·ªïi g√≥i
                                    </button>
                                </div>
                            </div>

                            <div id="upgradeResult" class="upgrade-result" style="display:none;">
                                <div class="result-header">
                                    <h4>K·∫øt qu·∫£ ƒë·ªïi g√≥i</h4>
                                </div>
                                
                                <div class="result-sections">
                                    <div class="result-section">
                                        <h5>Chi ti·∫øt t√≠nh to√°n</h5>
                                        <div id="upgradeBreakdown" class="breakdown"></div>
                                    </div>
                                    
                                    <div class="result-section">
                                        <h5>N·ªôi dung g·ª≠i kh√°ch</h5>
                                        <div class="result-content">
                                            <pre id="upgradeCustomerContent" class="upgrade-code"></pre>
                                            <div class="share-block">
                                                <button class="btn btn-primary" onclick="copyUpgradeResult()">
                                                    <span class="btn-icon">üìã</span>
                                                    Copy n·ªôi dung g·ª≠i kh√°ch
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    </div>
                </div>
            </section>

                <!-- SCHEDULE SECTION -->
                <section id="schedule" class="tab-content">
                    <div class="card schedule-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <span class="title-icon">üìÖ</span>
                                L·ªãch l√†m vi·ªác
                            </h3>
                            <p class="card-subtitle">Qu·∫£n l√Ω l·ªãch l√†m vi·ªác c·ªßa team 4 ng∆∞·ªùi</p>
                        </div>
                        
                        <div class="card-content">
                            <!-- Schedule Controls -->
                            <div class="schedule-controls">
                                <div class="view-toggle">
                                    <button class="btn btn-outline active" onclick="switchScheduleView('team')" id="teamViewBtn">
                                        <span class="btn-icon">üë•</span>
                                        L·ªãch t·ªïng
                                    </button>
                                    <button class="btn btn-outline" onclick="switchScheduleView('personal')" id="personalViewBtn">
                                        <span class="btn-icon">üë§</span>
                                        L·ªãch c√° nh√¢n
                                    </button>
                                </div>
                                
                                <div class="schedule-actions">
                                    <button class="btn btn-outline" onclick="openManagePeopleModal()">
                                        <span class="btn-icon">üë•</span>
                                        Qu·∫£n l√Ω ng∆∞·ªùi
                                    </button>
                                </div>
                            </div>

                            <!-- Team Schedule View -->
                            <div id="teamScheduleView" class="schedule-view active">
                                <div class="schedule-header">
                                    <h4>L·ªãch l√†m vi·ªác t·ªïng</h4>
                                    <div class="view-mode-toggle">
                                        <button class="btn btn-outline active" onclick="switchTeamViewMode('week')" id="teamWeekBtn">
                                            <span class="btn-icon">üìÖ</span>
                                            Tu·∫ßn
                                        </button>
                                        <button class="btn btn-outline" onclick="switchTeamViewMode('month')" id="teamMonthBtn">
                                            <span class="btn-icon">üìÜ</span>
                                            Th√°ng
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Team Week View -->
                                <div id="teamWeekView" class="team-sub-view active">
                                    <div class="week-navigation">
                                        <button class="btn btn-outline" onclick="changeWeek(-1)">‚Üê</button>
                                        <span id="currentWeek" class="week-display">Tu·∫ßn 1-7/1/2024</span>
                                        <button class="btn btn-outline" onclick="changeWeek(1)">‚Üí</button>
                                    </div>
                                    
                                    <div class="schedule-table">
                                        <div class="schedule-grid" id="teamScheduleGrid">
                                            <!-- S·∫Ω ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Team Month View -->
                                <div id="teamMonthView" class="team-sub-view">
                                    <div class="month-navigation">
                                        <button class="btn btn-outline" onclick="changeMonth(-1)">‚Üê</button>
                                        <span id="currentMonth" class="month-display">Th√°ng 1/2024</span>
                                        <button class="btn btn-outline" onclick="changeMonth(1)">‚Üí</button>
                                    </div>
                                    
                                    <div class="monthly-calendar" id="teamMonthlyCalendar">
                                        <!-- S·∫Ω ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
                                    </div>
                                </div>
                            </div>

                            <!-- Personal Schedule View -->
                            <div id="personalScheduleView" class="schedule-view">
                                <div class="schedule-header">
                                    <h4>L·ªãch c√° nh√¢n</h4>
                                    <div class="personal-controls">
                                        <div class="person-selector">
                                            <select id="personSelect" class="form-select" onchange="loadPersonalSchedule()">
                                                <option value="person1">Ng∆∞·ªùi 1</option>
                                                <option value="person2">Ng∆∞·ªùi 2</option>
                                                <option value="person3">Ng∆∞·ªùi 3</option>
                                                <option value="person4">Ng∆∞·ªùi 4</option>
                                            </select>
                                        </div>
                                        <div class="view-mode-toggle">
                                            <button class="btn btn-outline active" onclick="switchPersonalViewMode('week')" id="personalWeekBtn">
                                                <span class="btn-icon">üìÖ</span>
                                                Tu·∫ßn
                                            </button>
                                            <button class="btn btn-outline" onclick="switchPersonalViewMode('month')" id="personalMonthBtn">
                                                <span class="btn-icon">üìÜ</span>
                                                Th√°ng
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Personal Week View -->
                                <div id="personalWeekView" class="personal-sub-view active">
                                    <div class="week-navigation">
                                        <button class="btn btn-outline" onclick="changeWeek(-1)">‚Üê</button>
                                        <span id="personalCurrentWeek" class="week-display">Tu·∫ßn 1-7/1/2024</span>
                                        <button class="btn btn-outline" onclick="changeWeek(1)">‚Üí</button>
                                    </div>
                                    
                                    <div class="schedule-table">
                                        <div class="schedule-grid" id="personalScheduleGrid">
                                            <!-- S·∫Ω ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Personal Month View -->
                                <div id="personalMonthView" class="personal-sub-view">
                                    <div class="month-navigation">
                                        <button class="btn btn-outline" onclick="changeMonth(-1)">‚Üê</button>
                                        <span id="personalCurrentMonth" class="month-display">Th√°ng 1/2024</span>
                                        <button class="btn btn-outline" onclick="changeMonth(1)">‚Üí</button>
                                    </div>
                                    
                                    <div class="monthly-calendar" id="personalMonthlyCalendar">
                                        <!-- S·∫Ω ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
                                    </div>
                                </div>
                            </div>


                            <!-- Schedule Stats -->
                            <div class="schedule-stats">
                                <div class="stat-card">
                                    <div class="stat-icon">‚è∞</div>
                                    <div class="stat-info">
                                        <div class="stat-value" id="totalHours">0h</div>
                                        <div class="stat-label">T·ªïng gi·ªù l√†m</div>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon">üë•</div>
                                    <div class="stat-info">
                                        <div class="stat-value" id="activePeople">0</div>
                                        <div class="stat-label">Ng∆∞·ªùi l√†m vi·ªác</div>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon">üìä</div>
                                    <div class="stat-info">
                                        <div class="stat-value" id="coverageRate">0%</div>
                                        <div class="stat-label">T·ª∑ l·ªá ph·ªß ca</div>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon">üí∞</div>
                                    <div class="stat-info">
                                        <div class="stat-value" id="totalSalary">0ƒë</div>
                                        <div class="stat-label">T·ªïng l∆∞∆°ng</div>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon">üçΩÔ∏è</div>
                                    <div class="stat-info">
                                        <div class="stat-value" id="totalMealAllowance">0ƒë</div>
                                        <div class="stat-label">Tr·ª£ c·∫•p ƒÉn</div>
                                    </div>
                                </div>
                            </div>

                            <!-- People Summary -->
                            <div class="people-summary">
                                <h4>Th·ªëng k√™ t·ª´ng ng∆∞·ªùi</h4>
                                <div class="people-grid" id="peopleGrid">
                                    <!-- S·∫Ω ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

            </div>
        </main>

        <div id="workflowStatus"></div>
    </div>

    <div class="mobile-overlay" id="mobileOverlay"></div>

    <!-- Edit Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Ch·ªânh s·ª≠a s·∫£n ph·∫©m</h3>
                <button class="modal-close" onclick="closeEditModal()">√ó</button>
            </div>
            
            <div class="modal-body">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">T√™n s·∫£n ph·∫©m</label>
                        <input id="editProductName" class="form-input" placeholder="Nh·∫≠p t√™n s·∫£n ph·∫©m..." />
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Th·ªùi h·∫°n</label>
                        <div class="input-group">
                            <input id="editProductDuration" class="form-input" type="number" placeholder="0" />
                            <select id="editDurationUnit" class="form-select">
                    <option value="ng√†y">ng√†y</option>
                    <option value="th√°ng">th√°ng</option>
                </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Gi√° (VNƒê)</label>
                        <input id="editProductPrice" class="form-input" placeholder="0" inputmode="numeric" autocomplete="off" />
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Danh m·ª•c</label>
                        <select id="editProductCategory" class="form-select">
                    <option value="AI Services">AI Services</option>
                    <option value="C√¥ng c·ª•">C√¥ng c·ª•</option>
                </select>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeEditModal()">H·ªßy</button>
                <button class="btn btn-primary" onclick="saveEditProduct()">
                    <span class="btn-icon">üíæ</span>
                    L∆∞u thay ƒë·ªïi
                </button>
            </div>
        </div>
    </div>

    <!-- Confirm Dialog -->
    <div id="confirmDialog" class="modal">
        <div class="modal-content">
            <div class="modal-header">
            <h3 id="confirmTitle">X√°c nh·∫≠n</h3>
            </div>
            
            <div class="modal-body">
                <p id="confirmMessage">B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën th·ª±c hi·ªán h√†nh ƒë·ªông n√†y?</p>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeConfirm()">H·ªßy</button>
                <button class="btn btn-danger" onclick="confirmAction()">
                    <span class="btn-icon">‚ö†Ô∏è</span>
                    X√°c nh·∫≠n
                </button>
            </div>
        </div>
    </div>

    <!-- Manage People Modal -->
    <div id="managePeopleModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Qu·∫£n l√Ω ng∆∞·ªùi l√†m vi·ªác</h3>
                <button class="modal-close" onclick="closeManagePeopleModal()">√ó</button>
            </div>
            
            <div class="modal-body">
                <div class="people-management">
                    <div class="people-list" id="peopleList">
                        <!-- S·∫Ω ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeManagePeopleModal()">ƒê√≥ng</button>
                <button class="btn btn-primary" onclick="savePeopleChanges()">
                    <span class="btn-icon">üíæ</span>
                    L∆∞u thay ƒë·ªïi
                </button>
            </div>
        </div>
    </div>

    <!-- Edit Shift Modal -->
    <div id="editShiftModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="editShiftTitle">Ch·ªânh s·ª≠a ca l√†m vi·ªác</h3>
                <button class="modal-close" onclick="closeEditShiftModal()">√ó</button>
            </div>
            
            <div class="modal-body">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Ng∆∞·ªùi l√†m vi·ªác</label>
                        <select id="editShiftPerson" class="form-select">
                            <option value="person1">Ng∆∞·ªùi 1</option>
                            <option value="person2">Ng∆∞·ªùi 2</option>
                            <option value="person3">Ng∆∞·ªùi 3</option>
                            <option value="person4">Ng∆∞·ªùi 4</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ng√†y</label>
                        <select id="editShiftDay" class="form-select">
                            <option value="monday">Th·ª© 2</option>
                            <option value="tuesday">Th·ª© 3</option>
                            <option value="wednesday">Th·ª© 4</option>
                            <option value="thursday">Th·ª© 5</option>
                            <option value="friday">Th·ª© 6</option>
                            <option value="saturday">Th·ª© 7</option>
                            <option value="sunday">Ch·ªß nh·∫≠t</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ca l√†m vi·ªác</label>
                        <select id="editShiftType" class="form-select" onchange="updateEditShiftTimes()">
                            <option value="shift1">Ca 1 (8h-12h)</option>
                            <option value="shift2">Ca 2 (13h-17h)</option>
                            <option value="shift3">Ca 3 (18h-22h)</option>
                            <option value="shift1-2">Ca 1+2 (8h-17h)</option>
                            <option value="shift2-3">Ca 2+3 (13h-22h)</option>
                            <option value="shift1-3">Ca 1+3 (8h-12h, 18h-22h)</option>
                            <option value="all">C·∫£ ng√†y (8h-22h)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Tr·ª£ c·∫•p ƒÉn c∆°m</label>
                        <div class="meal-allowance-options">
                            <label class="radio-option">
                                <input type="radio" name="editMealAllowance" value="company" checked>
                                <span class="radio-label">C√¥ng ty cung c·∫•p (40k)</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="editMealAllowance" value="self">
                                <span class="radio-label">T·ª± mua c∆°m (40k)</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ghi ch√∫ (t√πy ch·ªçn)</label>
                        <input id="editShiftNote" class="form-input" placeholder="Ghi ch√∫ ƒë·∫∑c bi·ªát..." />
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-danger" onclick="deleteShift()">
                    <span class="btn-icon">üóëÔ∏è</span>
                    X√≥a ca
                </button>
                <button class="btn btn-outline" onclick="closeEditShiftModal()">H·ªßy</button>
                <button class="btn btn-primary" onclick="saveShift()">
                    <span class="btn-icon">üíæ</span>
                    L∆∞u thay ƒë·ªïi
                </button>
            </div>
        </div>
    </div>

    <!-- Add Shift Modal -->
    <div id="addShiftModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Th√™m ca l√†m vi·ªác</h3>
                <button class="modal-close" onclick="closeAddShiftModal()">√ó</button>
            </div>
            
            <div class="modal-body">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Ng∆∞·ªùi l√†m vi·ªác</label>
                        <select id="shiftPerson" class="form-select">
                            <option value="person1">Ng∆∞·ªùi 1</option>
                            <option value="person2">Ng∆∞·ªùi 2</option>
                            <option value="person3">Ng∆∞·ªùi 3</option>
                            <option value="person4">Ng∆∞·ªùi 4</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ng√†y</label>
                        <select id="shiftDay" class="form-select">
                            <option value="monday">Th·ª© 2</option>
                            <option value="tuesday">Th·ª© 3</option>
                            <option value="wednesday">Th·ª© 4</option>
                            <option value="thursday">Th·ª© 5</option>
                            <option value="friday">Th·ª© 6</option>
                            <option value="saturday">Th·ª© 7</option>
                            <option value="sunday">Ch·ªß nh·∫≠t</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ca l√†m vi·ªác</label>
                        <select id="shiftType" class="form-select" onchange="updateShiftTimes()">
                            <option value="shift1">Ca 1 (8h-12h)</option>
                            <option value="shift2">Ca 2 (13h-17h)</option>
                            <option value="shift3">Ca 3 (18h-22h)</option>
                            <option value="shift1-2">Ca 1+2 (8h-17h)</option>
                            <option value="shift2-3">Ca 2+3 (13h-22h)</option>
                            <option value="shift1-3">Ca 1+3 (8h-12h, 18h-22h)</option>
                            <option value="all">C·∫£ ng√†y (8h-22h)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Tr·ª£ c·∫•p ƒÉn c∆°m</label>
                        <div class="meal-allowance-options">
                            <label class="radio-option">
                                <input type="radio" name="mealAllowance" value="company" checked>
                                <span class="radio-label">C√¥ng ty cung c·∫•p (40k)</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="mealAllowance" value="self">
                                <span class="radio-label">T·ª± mua c∆°m (40k)</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ghi ch√∫ (t√πy ch·ªçn)</label>
                        <input id="shiftNote" class="form-input" placeholder="Ghi ch√∫ ƒë·∫∑c bi·ªát..." />
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeAddShiftModal()">H·ªßy</button>
                <button class="btn btn-primary" onclick="addShift()">
                    <span class="btn-icon">‚ûï</span>
                    Th√™m ca
                </button>
            </div>
        </div>
    </div>


    <!-- Hidden file input -->
    <input type="file" id="importFile" style="display:none" onchange="handleImport()" />

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/version.js"></script>
    <script src="js/app.js"></script>
    <script src="js/modules/refund.js"></script>
    <script src="js/modules/admin.js"></script>
    <script src="js/modules/templates.js"></script>
    <script src="js/modules/upgrade.js"></script>
    <script src="js/modules/schedule.js"></script>
    <div id="versionBadge" class="version-badge">v0.0.2.5</div>
    <div id="toastContainer" class="toast-container"></div>
</body>
</html>