<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>AI Sales Assistant</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css?v=github-pages" />
</head>
<body>
    <!-- App Shell -->
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo-container">
                    <div class="logo">🚀</div>
                    <div class="brand-info">
                        <h1>AI Sales</h1>
                        <span class="brand-subtitle">Assistant</span>
                    </div>
                </div>
                
            </div>

            <nav class="sidebar-nav">
                <div class="nav-section">
                    <h3 class="nav-section-title">Quản lý</h3>
                    <button class="nav-item active" onclick="switchTab('admin')" data-tab="admin">
                        <span class="nav-icon">📦</span>
                        <span class="nav-label">Sản phẩm</span>
                        <span class="nav-badge" id="productCount">0</span>
                    </button>
                </div>
                
                <div class="nav-section">
                    <h3 class="nav-section-title">Tạo nội dung</h3>
                    <button class="nav-item" onclick="switchTab('templates')" data-tab="templates">
                        <span class="nav-icon">📝</span>
                        <span class="nav-label">Templates</span>
                    </button>
                    <button class="nav-item" onclick="switchTab('refund')" data-tab="refund">
                        <span class="nav-icon">💰</span>
                        <span class="nav-label">Hoàn tiền</span>
                    </button>
                    <button class="nav-item" onclick="switchTab('upgrade')" data-tab="upgrade">
                        <span class="nav-icon">🔄</span>
                        <span class="nav-label">Đổi gói</span>
                    </button>
                </div>
                
                <div class="nav-section">
                    <h3 class="nav-section-title">Quản lý</h3>
                    <button class="nav-item" onclick="switchTab('schedule')" data-tab="schedule">
                        <span class="nav-icon">📅</span>
                        <span class="nav-label">Lịch làm việc</span>
                    </button>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">👤</div>
                    <div class="user-details">
                        <span class="user-name">Admin</span>
                        <span class="user-role">Quản lý</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Header -->
            <header class="main-header">
                <div class="header-left">
                    <h2 class="page-title" id="pageTitle">Quản lý sản phẩm</h2>
                    <p class="page-subtitle" id="pageSubtitle">Thêm, chỉnh sửa và quản lý các gói sản phẩm</p>
                </div>
                
                <div class="header-controls">
                    <div class="header-stats">
                        <div class="header-stat">
                            <span class="header-stat-value" id="productCount">0</span>
                            <span>Sản phẩm</span>
                        </div>
                        <div class="header-stat">
                            <span class="header-stat-value" id="lastUpdated">--:--</span>
                            <span>Cập nhật</span>
                        </div>
                    </div>
                    
                    <div class="header-actions">
                        <div class="action-group">
                            <div class="dropdown">
                                <button class="btn btn-primary" id="fileMenuBtn">
                                    <span class="btn-icon">📁</span>
                                    File
                                    <span class="dropdown-arrow">▼</span>
                                </button>
                                <div class="dropdown-menu" id="fileMenu">
                                    <button class="dropdown-item" onclick="loadFromGoogleSheets()">
                                        <span class="item-icon">📊</span>
                                        Tải từ Google Sheets
                                    </button>
                                    <button class="dropdown-item" onclick="saveToGoogleSheets()">
                                        <span class="item-icon">💾</span>
                                        Lưu vào Google Sheets
                                    </button>
                                    <div class="dropdown-divider"></div>
                                    <button class="dropdown-item" onclick="exportData()">
                                        <span class="item-icon">📤</span>
                                        Xuất dữ liệu
                                    </button>
                                    <button class="dropdown-item" onclick="importData()">
                                        <span class="item-icon">📥</span>
                                        Nhập dữ liệu
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Content Area -->
            <div class="content-area">
                <!-- ADMIN SECTION -->
                <section id="admin" class="tab-content active">
                    <!-- Add Product Card -->
                    <div class="card add-product-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <span class="title-icon">➕</span>
                                Thêm sản phẩm mới
                            </h3>
                            <p class="card-subtitle">Tạo gói sản phẩm mới cho hệ thống</p>
                        </div>
                        
                        <div class="card-content">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label class="form-label">Tên sản phẩm</label>
                                    <input id="productName" class="form-input" placeholder="Nhập tên sản phẩm..." />
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Thời hạn</label>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <input id="productDuration" class="form-input" type="number" placeholder="0" />
                                        </div>
                                        <div class="form-group">
                                            <select id="durationUnit" class="form-select">
                                                <option value="ngày">ngày</option>
                                                <option value="tháng">tháng</option>
                                            </select>
                                        </div>
                                    </div>
            </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Giá (VNĐ)</label>
                                    <input id="productPrice" class="form-input" placeholder="0" inputmode="numeric" autocomplete="off" />
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Danh mục</label>
                                    <select id="productCategory" class="form-select">
                                <option value="AI Services">AI Services</option>
                                <option value="Công cụ">Công cụ</option>
                            </select>
                        </div>
                    </div>

                            <div class="form-actions">
                                <button class="btn btn-primary btn-lg" onclick="addProduct()">
                                    <span class="btn-icon">➕</span>
                                    Thêm sản phẩm
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Search and Filter -->
                    <div class="card card-compact">
                        <div class="card-content">
                            <div class="form-row">
                                <div class="form-group flex-1">
                                    <div class="search-input-group">
                                        <span class="search-icon">🔍</span>
                                        <input id="adminSearch" class="form-input" placeholder="Tìm kiếm sản phẩm..." oninput="filterProducts()" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <select id="categoryFilter" class="form-select" onchange="filterProducts()">
                                        <option value="">Tất cả danh mục</option>
                            <option value="AI Services">AI Services</option>
                            <option value="Công cụ">Công cụ</option>
                        </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Products List -->
                    <div class="card products-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <span class="title-icon">📦</span>
                                Danh sách sản phẩm
                            </h3>
                            <div class="card-actions">
                                <span class="products-count" id="productsCount">0 sản phẩm</span>
                            </div>
                    </div>

                        <div class="card-content">
                            <div id="productList" class="products-list"></div>
                        </div>
                </div>
            </section>

                <!-- TEMPLATES SECTION -->
            <section id="templates" class="tab-content">
                    <div class="card template-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <span class="title-icon">📝</span>
                                Tạo Template
                            </h3>
                            <p class="card-subtitle">Tạo nội dung template cho khách hàng</p>
                    </div>

                        <div class="card-content">
                            <div id="templateEmptyState" class="empty-state">
                                <div class="empty-icon">📝</div>
                                <h4>Chưa có sản phẩm</h4>
                                <p>Vui lòng thêm sản phẩm trước khi tạo template</p>
                            </div>

                            <div class="template-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Chọn sản phẩm</label>
                        <div class="search-container">
                                            <input id="templateProductSearch" class="form-input" type="text" placeholder="Tìm kiếm sản phẩm..." />
                            <div id="templateSearchResults" class="search-results"></div>
                                        </div>
                        </div>

                                    <div class="form-group">
                                        <label class="form-label">Tên khách hàng (tùy chọn)</label>
                                        <input id="customerName" class="form-input" type="text" placeholder="VD: Anh Hiếu" />
                                    </div>
                        </div>

                                <div class="form-actions">
                                    <button id="generateBtn" class="btn btn-primary btn-large" disabled onclick="generateTemplate()">
                                        <span class="btn-icon">✨</span>
                                        Tạo Template
                                    </button>
                        </div>
                    </div>

                            <div id="templateResult" class="template-result" style="display:none;">
                                <div class="result-header">
                                    <h4>Kết quả Template</h4>
                                    <button class="btn btn-outline" onclick="copyTemplate()">
                                        <span class="btn-icon">📋</span>
                                        Copy
                                    </button>
                                </div>
                                <div class="result-content">
                                    <pre id="templateContent" class="template-code"></pre>
                                </div>
                            </div>
                    </div>
                </div>
            </section>

                <!-- REFUND SECTION -->
            <section id="refund" class="tab-content">
                    <div class="card refund-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <span class="title-icon">💰</span>
                                Tính hoàn tiền
                            </h3>
                            <p class="card-subtitle">Tính toán số tiền hoàn lại cho khách hàng</p>
                    </div>

                        <div class="card-content">
                            <div id="refundEmptyState" class="empty-state">
                                <div class="empty-icon">💰</div>
                                <h4>Chưa có sản phẩm</h4>
                                <p>Vui lòng thêm sản phẩm trước khi tính hoàn tiền</p>
                            </div>

                            <div class="refund-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Chọn sản phẩm</label>
                        <div class="search-container">
                                            <input id="refundProductSearch" class="form-input" type="text" placeholder="Tìm kiếm sản phẩm..." />
                            <div id="refundSearchResults" class="search-results"></div>
                                        </div>
                        </div>

                                    <div class="form-group">
                                        <label class="form-label">Khoảng thời gian</label>
                            <div class="date-range">
                                            <div class="date-input-group">
                                                <input type="date" id="startDate" class="form-input" />
                                                <button type="button" class="btn-today" onclick="setToday('startDate')" title="Ngày hiện tại">📅</button>
                                            </div>
                                            <span class="date-separator">đến</span>
                                            <div class="date-input-group">
                                                <input type="date" id="endDate" class="form-input" />
                                                <button type="button" class="btn-today" onclick="setToday('endDate')" title="Ngày hiện tại">📅</button>
                                            </div>
                                        </div>
                                        <small class="form-hint">Chọn ngày bắt đầu sử dụng và ngày yêu cầu hoàn</small>
                            </div>
                        </div>

                                <div id="refundSelectedProduct" class="selected-product" style="display:none;">
                                    <div class="selected-header">
                                        <h4>Sản phẩm đã chọn</h4>
                                    </div>
                                    <div class="selected-details">
                                        <div class="detail-item">
                                            <span class="detail-label">Tên:</span>
                                            <span id="refundProductName" class="detail-value"></span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Giá:</span>
                                            <span id="refundProductPrice" class="detail-value"></span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label">Thời hạn:</span>
                                            <span id="refundProductDuration" class="detail-value"></span>
                                        </div>
                                    </div>
                        </div>

                                <div class="form-actions">
                                    <button id="refundBtn" class="btn btn-primary btn-large" disabled onclick="calculateRefund()">
                                        <span class="btn-icon">🧮</span>
                                        Tính hoàn tiền
                                    </button>
                        </div>
                    </div>

                            <div id="refundResult" class="refund-result" style="display:none;">
                                <div class="result-header">
                                    <h4>Kết quả tính toán</h4>
                                    <button class="btn btn-outline" onclick="copyRefundResult()">
                                        <span class="btn-icon">📋</span>
                                        Copy
                                    </button>
                                </div>
                                
                                <div class="result-sections">
                                    <div class="result-section">
                                        <h5>Chi tiết tính toán</h5>
                        <div id="refundBreakdown" class="breakdown"></div>
                                    </div>
                                    
                                    <div class="result-section">
                                        <h5>Nội dung gửi khách</h5>
                                        <div class="result-content">
                                            <pre id="refundCustomerContent" class="refund-code"></pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- UPGRADE SECTION -->
                <section id="upgrade" class="tab-content">
                    <div class="card upgrade-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <span class="title-icon">🔄</span>
                                Đổi gói sản phẩm
                            </h3>
                            <p class="card-subtitle">Tính toán số tiền bù khi khách hàng đổi sang gói khác</p>
                        </div>
                        
                        <div class="card-content">
                            <div id="upgradeEmptyState" class="empty-state">
                                <div class="empty-icon">🔄</div>
                                <h4>Chưa có sản phẩm</h4>
                                <p>Vui lòng thêm sản phẩm trước khi tính đổi gói</p>
                            </div>

                            <div class="upgrade-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Gói hiện tại</label>
                                        <div class="search-container">
                                            <input id="currentProductSearch" class="form-input" type="text" placeholder="Tìm kiếm gói hiện tại..." />
                                            <div id="currentProductSearchResults" class="search-results"></div>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">Gói muốn đổi</label>
                                        <div class="search-container">
                                            <input id="newProductSearch" class="form-input" type="text" placeholder="Tìm kiếm gói mới..." />
                                            <div id="newProductSearchResults" class="search-results"></div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Ngày bắt đầu sử dụng</label>
                                        <div class="date-input-group">
                                            <input type="date" id="upgradeStartDate" class="form-input" />
                                            <button type="button" class="btn-today" onclick="setToday('upgradeStartDate')" title="Ngày hiện tại">📅</button>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">Ngày đổi gói</label>
                                        <div class="date-input-group">
                                            <input type="date" id="upgradeEndDate" class="form-input" />
                                            <button type="button" class="btn-today" onclick="setToday('upgradeEndDate')" title="Ngày hiện tại">📅</button>
                                        </div>
                                    </div>
                                </div>

                                <div id="upgradeSelectedProducts" class="selected-products" style="display:none;">
                                    <div class="products-comparison">
                                        <div class="product-card current-product">
                                            <div class="product-card-header">
                                                <h4>Gói hiện tại</h4>
                                            </div>
                                            <div class="product-details">
                                                <div class="detail-item">
                                                    <span class="detail-label">Tên:</span>
                                                    <span id="currentProductName" class="detail-value"></span>
                                                </div>
                                                <div class="detail-item">
                                                    <span class="detail-label">Giá:</span>
                                                    <span id="currentProductPrice" class="detail-value"></span>
                                                </div>
                                                <div class="detail-item">
                                                    <span class="detail-label">Thời hạn:</span>
                                                    <span id="currentProductDuration" class="detail-value"></span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="upgrade-arrow">→</div>
                                        
                                        <div class="product-card new-product">
                                            <div class="product-card-header">
                                                <h4>Gói mới</h4>
                                            </div>
                                            <div class="product-details">
                                                <div class="detail-item">
                                                    <span class="detail-label">Tên:</span>
                                                    <span id="newProductName" class="detail-value"></span>
                                                </div>
                                                <div class="detail-item">
                                                    <span class="detail-label">Giá:</span>
                                                    <span id="newProductPrice" class="detail-value"></span>
                                                </div>
                                                <div class="detail-item">
                                                    <span class="detail-label">Thời hạn:</span>
                                                    <span id="newProductDuration" class="detail-value"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-actions">
                                    <button id="upgradeBtn" class="btn btn-primary btn-large" disabled onclick="calculateUpgrade()">
                                        <span class="btn-icon">🧮</span>
                                        Tính đổi gói
                                    </button>
                                </div>
                            </div>

                            <div id="upgradeResult" class="upgrade-result" style="display:none;">
                                <div class="result-header">
                                    <h4>Kết quả đổi gói</h4>
                                    <button class="btn btn-outline" onclick="copyUpgradeResult()">
                                        <span class="btn-icon">📋</span>
                                        Copy
                                    </button>
                                </div>
                                
                                <div class="result-sections">
                                    <div class="result-section">
                                        <h5>Chi tiết tính toán</h5>
                                        <div id="upgradeBreakdown" class="breakdown"></div>
                                    </div>
                                    
                                    <div class="result-section">
                                        <h5>Nội dung gửi khách</h5>
                                        <div class="result-content">
                                            <pre id="upgradeCustomerContent" class="upgrade-code"></pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    </div>
                </div>
            </section>

                <!-- SCHEDULE SECTION -->
                <section id="schedule" class="tab-content">
                    <div class="card schedule-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <span class="title-icon">📅</span>
                                Lịch làm việc
                            </h3>
                            <p class="card-subtitle">Quản lý lịch làm việc của team 4 người</p>
                        </div>
                        
                        <div class="card-content">
                            <!-- Schedule Controls -->
                            <div class="schedule-controls">
                                <div class="view-toggle">
                                    <button class="btn btn-outline active" onclick="switchScheduleView('team')" id="teamViewBtn">
                                        <span class="btn-icon">👥</span>
                                        Lịch tổng
                                    </button>
                                    <button class="btn btn-outline" onclick="switchScheduleView('personal')" id="personalViewBtn">
                                        <span class="btn-icon">👤</span>
                                        Lịch cá nhân
                                    </button>
                                </div>
                                
                                <div class="schedule-actions">
                                    <button class="btn btn-outline" onclick="openManagePeopleModal()">
                                        <span class="btn-icon">👥</span>
                                        Quản lý người
                                    </button>
                                </div>
                            </div>

                            <!-- Team Schedule View -->
                            <div id="teamScheduleView" class="schedule-view active">
                                <div class="schedule-header">
                                    <h4>Lịch làm việc tổng</h4>
                                    <div class="view-mode-toggle">
                                        <button class="btn btn-outline active" onclick="switchTeamViewMode('week')" id="teamWeekBtn">
                                            <span class="btn-icon">📅</span>
                                            Tuần
                                        </button>
                                        <button class="btn btn-outline" onclick="switchTeamViewMode('month')" id="teamMonthBtn">
                                            <span class="btn-icon">📆</span>
                                            Tháng
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Team Week View -->
                                <div id="teamWeekView" class="team-sub-view active">
                                    <div class="week-navigation">
                                        <button class="btn btn-outline" onclick="changeWeek(-1)">←</button>
                                        <span id="currentWeek" class="week-display">Tuần 1-7/1/2024</span>
                                        <button class="btn btn-outline" onclick="changeWeek(1)">→</button>
                                    </div>
                                    
                                    <div class="schedule-table">
                                        <div class="schedule-grid" id="teamScheduleGrid">
                                            <!-- Sẽ được tạo bằng JavaScript -->
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Team Month View -->
                                <div id="teamMonthView" class="team-sub-view">
                                    <div class="month-navigation">
                                        <button class="btn btn-outline" onclick="changeMonth(-1)">←</button>
                                        <span id="currentMonth" class="month-display">Tháng 1/2024</span>
                                        <button class="btn btn-outline" onclick="changeMonth(1)">→</button>
                                    </div>
                                    
                                    <div class="monthly-calendar" id="teamMonthlyCalendar">
                                        <!-- Sẽ được tạo bằng JavaScript -->
                                    </div>
                                </div>
                            </div>

                            <!-- Personal Schedule View -->
                            <div id="personalScheduleView" class="schedule-view">
                                <div class="schedule-header">
                                    <h4>Lịch cá nhân</h4>
                                    <div class="personal-controls">
                                        <div class="person-selector">
                                            <select id="personSelect" class="form-select" onchange="loadPersonalSchedule()">
                                                <option value="person1">Người 1</option>
                                                <option value="person2">Người 2</option>
                                                <option value="person3">Người 3</option>
                                                <option value="person4">Người 4</option>
                                            </select>
                                        </div>
                                        <div class="view-mode-toggle">
                                            <button class="btn btn-outline active" onclick="switchPersonalViewMode('week')" id="personalWeekBtn">
                                                <span class="btn-icon">📅</span>
                                                Tuần
                                            </button>
                                            <button class="btn btn-outline" onclick="switchPersonalViewMode('month')" id="personalMonthBtn">
                                                <span class="btn-icon">📆</span>
                                                Tháng
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Personal Week View -->
                                <div id="personalWeekView" class="personal-sub-view active">
                                    <div class="week-navigation">
                                        <button class="btn btn-outline" onclick="changeWeek(-1)">←</button>
                                        <span id="personalCurrentWeek" class="week-display">Tuần 1-7/1/2024</span>
                                        <button class="btn btn-outline" onclick="changeWeek(1)">→</button>
                                    </div>
                                    
                                    <div class="schedule-table">
                                        <div class="schedule-grid" id="personalScheduleGrid">
                                            <!-- Sẽ được tạo bằng JavaScript -->
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Personal Month View -->
                                <div id="personalMonthView" class="personal-sub-view">
                                    <div class="month-navigation">
                                        <button class="btn btn-outline" onclick="changeMonth(-1)">←</button>
                                        <span id="personalCurrentMonth" class="month-display">Tháng 1/2024</span>
                                        <button class="btn btn-outline" onclick="changeMonth(1)">→</button>
                                    </div>
                                    
                                    <div class="monthly-calendar" id="personalMonthlyCalendar">
                                        <!-- Sẽ được tạo bằng JavaScript -->
                                    </div>
                                </div>
                            </div>


                            <!-- Schedule Stats -->
                            <div class="schedule-stats">
                                <div class="stat-card">
                                    <div class="stat-icon">⏰</div>
                                    <div class="stat-info">
                                        <div class="stat-value" id="totalHours">0h</div>
                                        <div class="stat-label">Tổng giờ làm</div>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon">👥</div>
                                    <div class="stat-info">
                                        <div class="stat-value" id="activePeople">0</div>
                                        <div class="stat-label">Người làm việc</div>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon">📊</div>
                                    <div class="stat-info">
                                        <div class="stat-value" id="coverageRate">0%</div>
                                        <div class="stat-label">Tỷ lệ phủ ca</div>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon">💰</div>
                                    <div class="stat-info">
                                        <div class="stat-value" id="totalSalary">0đ</div>
                                        <div class="stat-label">Tổng lương</div>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon">🍽️</div>
                                    <div class="stat-info">
                                        <div class="stat-value" id="totalMealAllowance">0đ</div>
                                        <div class="stat-label">Trợ cấp ăn</div>
                                    </div>
                                </div>
                            </div>

                            <!-- People Summary -->
                            <div class="people-summary">
                                <h4>Thống kê từng người</h4>
                                <div class="people-grid" id="peopleGrid">
                                    <!-- Sẽ được tạo bằng JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <div id="workflowStatus"></div>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Chỉnh sửa sản phẩm</h3>
                <button class="modal-close" onclick="closeEditModal()">×</button>
            </div>
            
            <div class="modal-body">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Tên sản phẩm</label>
                        <input id="editProductName" class="form-input" placeholder="Nhập tên sản phẩm..." />
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Thời hạn</label>
                        <div class="input-group">
                            <input id="editProductDuration" class="form-input" type="number" placeholder="0" />
                            <select id="editDurationUnit" class="form-select">
                    <option value="ngày">ngày</option>
                    <option value="tháng">tháng</option>
                </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Giá (VNĐ)</label>
                        <input id="editProductPrice" class="form-input" placeholder="0" inputmode="numeric" autocomplete="off" />
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Danh mục</label>
                        <select id="editProductCategory" class="form-select">
                    <option value="AI Services">AI Services</option>
                    <option value="Công cụ">Công cụ</option>
                </select>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeEditModal()">Hủy</button>
                <button class="btn btn-primary" onclick="saveEditProduct()">
                    <span class="btn-icon">💾</span>
                    Lưu thay đổi
                </button>
            </div>
        </div>
    </div>

    <!-- Confirm Dialog -->
    <div id="confirmDialog" class="modal">
        <div class="modal-content">
            <div class="modal-header">
            <h3 id="confirmTitle">Xác nhận</h3>
            </div>
            
            <div class="modal-body">
                <p id="confirmMessage">Bạn có chắc chắn muốn thực hiện hành động này?</p>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeConfirm()">Hủy</button>
                <button class="btn btn-danger" onclick="confirmAction()">
                    <span class="btn-icon">⚠️</span>
                    Xác nhận
                </button>
            </div>
        </div>
    </div>

    <!-- Manage People Modal -->
    <div id="managePeopleModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Quản lý người làm việc</h3>
                <button class="modal-close" onclick="closeManagePeopleModal()">×</button>
            </div>
            
            <div class="modal-body">
                <div class="people-management">
                    <div class="people-list" id="peopleList">
                        <!-- Sẽ được tạo bằng JavaScript -->
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeManagePeopleModal()">Đóng</button>
                <button class="btn btn-primary" onclick="savePeopleChanges()">
                    <span class="btn-icon">💾</span>
                    Lưu thay đổi
                </button>
            </div>
        </div>
    </div>

    <!-- Edit Shift Modal -->
    <div id="editShiftModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="editShiftTitle">Chỉnh sửa ca làm việc</h3>
                <button class="modal-close" onclick="closeEditShiftModal()">×</button>
            </div>
            
            <div class="modal-body">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Người làm việc</label>
                        <select id="editShiftPerson" class="form-select">
                            <option value="person1">Người 1</option>
                            <option value="person2">Người 2</option>
                            <option value="person3">Người 3</option>
                            <option value="person4">Người 4</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ngày</label>
                        <select id="editShiftDay" class="form-select">
                            <option value="monday">Thứ 2</option>
                            <option value="tuesday">Thứ 3</option>
                            <option value="wednesday">Thứ 4</option>
                            <option value="thursday">Thứ 5</option>
                            <option value="friday">Thứ 6</option>
                            <option value="saturday">Thứ 7</option>
                            <option value="sunday">Chủ nhật</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ca làm việc</label>
                        <select id="editShiftType" class="form-select" onchange="updateEditShiftTimes()">
                            <option value="shift1">Ca 1 (8h-12h)</option>
                            <option value="shift2">Ca 2 (13h-17h)</option>
                            <option value="shift3">Ca 3 (18h-22h)</option>
                            <option value="shift1-2">Ca 1+2 (8h-17h)</option>
                            <option value="shift2-3">Ca 2+3 (13h-22h)</option>
                            <option value="shift1-3">Ca 1+3 (8h-12h, 18h-22h)</option>
                            <option value="all">Cả ngày (8h-22h)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Trợ cấp ăn cơm</label>
                        <div class="meal-allowance-options">
                            <label class="radio-option">
                                <input type="radio" name="editMealAllowance" value="company" checked>
                                <span class="radio-label">Công ty cung cấp (40k)</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="editMealAllowance" value="self">
                                <span class="radio-label">Tự mua cơm (40k)</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ghi chú (tùy chọn)</label>
                        <input id="editShiftNote" class="form-input" placeholder="Ghi chú đặc biệt..." />
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-danger" onclick="deleteShift()">
                    <span class="btn-icon">🗑️</span>
                    Xóa ca
                </button>
                <button class="btn btn-outline" onclick="closeEditShiftModal()">Hủy</button>
                <button class="btn btn-primary" onclick="saveShift()">
                    <span class="btn-icon">💾</span>
                    Lưu thay đổi
                </button>
            </div>
        </div>
    </div>

    <!-- Add Shift Modal -->
    <div id="addShiftModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Thêm ca làm việc</h3>
                <button class="modal-close" onclick="closeAddShiftModal()">×</button>
            </div>
            
            <div class="modal-body">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Người làm việc</label>
                        <select id="shiftPerson" class="form-select">
                            <option value="person1">Người 1</option>
                            <option value="person2">Người 2</option>
                            <option value="person3">Người 3</option>
                            <option value="person4">Người 4</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ngày</label>
                        <select id="shiftDay" class="form-select">
                            <option value="monday">Thứ 2</option>
                            <option value="tuesday">Thứ 3</option>
                            <option value="wednesday">Thứ 4</option>
                            <option value="thursday">Thứ 5</option>
                            <option value="friday">Thứ 6</option>
                            <option value="saturday">Thứ 7</option>
                            <option value="sunday">Chủ nhật</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ca làm việc</label>
                        <select id="shiftType" class="form-select" onchange="updateShiftTimes()">
                            <option value="shift1">Ca 1 (8h-12h)</option>
                            <option value="shift2">Ca 2 (13h-17h)</option>
                            <option value="shift3">Ca 3 (18h-22h)</option>
                            <option value="shift1-2">Ca 1+2 (8h-17h)</option>
                            <option value="shift2-3">Ca 2+3 (13h-22h)</option>
                            <option value="shift1-3">Ca 1+3 (8h-12h, 18h-22h)</option>
                            <option value="all">Cả ngày (8h-22h)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Trợ cấp ăn cơm</label>
                        <div class="meal-allowance-options">
                            <label class="radio-option">
                                <input type="radio" name="mealAllowance" value="company" checked>
                                <span class="radio-label">Công ty cung cấp (40k)</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="mealAllowance" value="self">
                                <span class="radio-label">Tự mua cơm (40k)</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Ghi chú (tùy chọn)</label>
                        <input id="shiftNote" class="form-input" placeholder="Ghi chú đặc biệt..." />
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeAddShiftModal()">Hủy</button>
                <button class="btn btn-primary" onclick="addShift()">
                    <span class="btn-icon">➕</span>
                    Thêm ca
                </button>
            </div>
        </div>
    </div>


    <!-- Hidden file input -->
    <input type="file" id="importFile" style="display:none" onchange="handleImport()" />

    <!-- Scripts -->
    <script src="js/app.js"></script>
    <script src="js/modules/refund.js"></script>
    <script src="js/modules/admin.js"></script>
    <script src="js/modules/templates.js"></script>
    <script src="js/modules/upgrade.js"></script>
    <script src="js/modules/schedule.js"></script>
</body>
</html>
